<!DOCTYPE html>
<html lang="en">
<head>
	<title>Run Python Online</title>

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/jquery-1.12.4.min.js" type="text/javascript"></script>
	<script src="js/bootstrap.min.js" type="text/javascript"></script>

</head>

<body>

	<div class="container">
		<h3 class="h3Title">
			<span class="mainSpan">Python</span>
			<span class="codePlaySpan">code playground</span>
		</h3>
		<div class="panel panel-default">
			<div class="panel-heading">
				<ul class="nav nav-tabs">
					<li class="active">
						<a href="index.html">Python</a>
					</li>
					<li>
						<a href="c.html">C</a>
					</li>
				</ul>
			</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-md-6 pdL6">
						<div id="menuButtons">
							<button class="btn btn-default" id="btnRun">
								run
								<span class="glyphicon glyphicon-play" aria-hidden="true"></span>
							</button>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6 pdR0">
						<div class="ioTxt">input</div>
						<div id="ace-editor"></div>
					</div>
					<div class="col-md-6 pdL0">
						<div class="ioTxt">output</div>
						<textarea name="message" id="content"disabled="disabled" cols="15" rows="15" class="inline-txtarea"></textarea>
					</div>
				</div>
			</div>
			<textarea rows="5" cols="10" class="code" name="ace-editor" style="display: none;"></textarea>
		</div>
	</div>

	<script>
		var editor = ace.edit("ace-editor");
		editor.setTheme("ace/theme/monokai");
		editor.getSession().setMode("ace/mode/python");
		var textarea = $('textarea[name="ace-editor"]');
		var messagearea = $('textarea[name="message"]');
		editor.getSession().on("change", function () {
			textarea.val(editor.getSession().getValue());
		});
		$('#btnRun').click(function(){
			var code = encodeURI(textarea.val())
			$.ajax({
				type: 'POST',
				url: 'http://127.0.0.1:5000/python/',
				dataType: 'json',
				data: JSON.stringify({"code":code}),
				contentType: "application/json",
				cache: false
			}).done(function(data, textStatus, xhr) {
				messagearea.val("Success!\n" + data[0].output);

			}).fail(function(data, textStatus, xhr) {
				messagearea.val("Error!\n" + data.responseJSON[0].error);
			});
		});
	</script>

</body>
</html>